/* --- 1. ভেরিয়েবল এবং গ্লোবাল রিসেট --- */
:root {
    --glass: rgba(255, 255, 255, 0.1);
    --glass-hover: rgba(255, 255, 255, 0.15);
    --glass-border: rgba(255, 255, 255, 0.2);
    --text: #ffffff;
    --accent: #00d2ff;
    --shadow: 0 25px 50px rgba(0,0,0,0.3);
}

* { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Outfit', sans-serif; }

body {
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center; /* সেন্টারে রাখার জন্য */
    background-color: #1e3c72;
    background-size: cover;
    background-position: center;
    background-attachment: fixed;
    color: var(--text);
    padding: 20px; /* মোবাইলে সাইড গ্যাপ */
    transition: background-image 0.5s ease-in-out;
}

/* --- 2. ডায়নামিক ব্যাকগ্রাউন্ড --- */
body.clear { background-image: url('https://images.unsplash.com/photo-1601297183305-6df142704ea2?q=80&w=1974'); }
body.clouds { background-image: url('https://images.unsplash.com/photo-1534088568595-a066f410bcda?q=80&w=1951'); }
body.rain { background-image: url('https://images.unsplash.com/photo-1515694346937-94d85e41e6f0?q=80&w=1974'); }
body.snow { background-image: url('https://images.unsplash.com/photo-1517299321609-52687d1bc555?q=80&w=2070'); }
body.thunderstorm { background-image: url('https://images.unsplash.com/photo-1605727216801-e27ce1d0cc28?q=80&w=2071'); }
body.default { background-image: url('https://images.unsplash.com/photo-1516912481808-3406841bd33c?q=80&w=1944'); }

body::before {
    content: ''; position: absolute; inset: 0;
    background: rgba(0,0,0,0.4); z-index: -1;
}

/* --- 3. মেইন কন্টেইনার --- */
.glass-container {
    background: rgba(20, 20, 35, 0.65);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid var(--glass-border);
    border-radius: 24px;
    padding: 30px;
    width: 100%;
    max-width: 1200px; /* ম্যাপ যোগ হওয়ায় উইডথ একটু বাড়ানো হলো */
    box-shadow: var(--shadow);
}

/* --- 4. টপ বার (হেডার) --- */
.top-bar {
    display: flex; justify-content: space-between; align-items: center;
    margin-bottom: 25px; gap: 20px; flex-wrap: wrap;
}

.logo {
    font-weight: 700; font-size: 22px; letter-spacing: 1px;
    display: flex; align-items: center; gap: 10px; color: var(--text);
    white-space: nowrap;
}

.current-time {
    font-size: 16px; font-weight: 500; opacity: 0.8; letter-spacing: 1px;
    white-space: nowrap;
}

/* সার্চ বক্স */
.search-box {
    flex: 1; max-width: 450px; position: relative;
    background: rgba(255,255,255,0.1);
    border-radius: 50px; padding: 10px 20px;
    display: flex; align-items: center;
    border: 1px solid transparent; transition: 0.3s;
}

.search-box:focus-within {
    background: rgba(255,255,255,0.2);
    border-color: var(--accent);
    box-shadow: 0 0 15px rgba(0, 210, 255, 0.2);
}

.search-box input {
    background: transparent; border: none; outline: none;
    color: white; width: 100%; margin-left: 10px; font-size: 16px;
}
.search-box input::placeholder { color: rgba(255,255,255,0.6); }

/* অটোসাজেশন */
.suggestions-list {
    position: absolute; top: 110%; left: 0; right: 0;
    background: white; border-radius: 12px;
    list-style: none; overflow: hidden; display: none; z-index: 100;
    box-shadow: 0 10px 25px rgba(0,0,0,0.3);
}
.suggestions-list li {
    padding: 12px 15px; cursor: pointer; color: #333;
    border-bottom: 1px solid #eee; font-size: 14px;
}
.suggestions-list li:hover { background: #f4f4f4; color: #000; }

/* --- 5. ড্যাশবোর্ড গ্রিড (Desktop First) --- */
.dashboard-grid {
    display: grid;
    grid-template-columns: 1.2fr 1.8fr; /* বামে ৪০%, ডানে ৬০% */
    gap: 20px; margin-bottom: 20px;
}

/* বাম পাশ: হিরো কার্ড */
.weather-hero {
    background: var(--glass); border-radius: 20px; padding: 30px;
    display: flex; flex-direction: column; justify-content: center; align-items: center;
    text-align: center; border: 1px solid var(--glass-border);
    min-height: 300px;
}

.location-badge {
    background: rgba(255,255,255,0.15); padding: 8px 20px;
    border-radius: 20px; font-size: 14px; font-weight: 500;
    display: inline-flex; align-items: center; gap: 8px; margin-bottom: 15px;
}

.weather-icon { width: 120px; drop-shadow: 0 0 20px rgba(255,255,255,0.2); }
.temp-group h1 { 
    font-size: 90px; line-height: 1; font-weight: 600; 
    text-shadow: 0 5px 15px rgba(0,0,0,0.2); margin: 10px 0;
}
.temp-group p { font-size: 22px; opacity: 0.9; text-transform: capitalize; color: var(--accent); }

/* ডান পাশ: ডিটেইলস গ্রিড */
.details-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 15px;
}

.details-grid .aqi-card {
    grid-column: span 3; /* পুরো লাইন নেবে */
    display: flex; flex-direction: column; justify-content: center;
}

.card {
    background: rgba(255,255,255,0.05); padding: 20px; border-radius: 18px;
    border: 1px solid rgba(255,255,255,0.05); transition: 0.3s;
    display: flex; flex-direction: column; justify-content: center;
}
.card:hover { transform: translateY(-5px); background: var(--glass-hover); }

.card-head {
    font-size: 13px; opacity: 0.7; display: flex; gap: 8px;
    align-items: center; margin-bottom: 8px; text-transform: uppercase;
}
.card h3 { font-size: 24px; font-weight: 600; }
.card h3 small { font-size: 14px; font-weight: 400; opacity: 0.6; }

.progress-bar {
    height: 6px; background: rgba(255,255,255,0.1);
    border-radius: 3px; margin-top: 10px; width: 100%; overflow: hidden;
}
.progress-bar .fill { height: 100%; background: var(--accent); border-radius: 3px; }

/* --- 6. বটম সেকশন (ম্যাপ + গ্রাফ + ফোরকাস্ট) --- */
.bottom-section {
    display: grid;
    /* ম্যাপ (1fr), গ্রাফ (1fr), ফোরকাস্ট (0.8fr) */
    grid-template-columns: 1fr 1fr 0.8fr; 
    gap: 20px;
}

.map-box, .graph-box, .forecast-box {
    background: var(--glass); padding: 25px;
    border-radius: 20px; border: 1px solid var(--glass-border);
}

.bottom-section h4 {
    font-size: 15px; margin-bottom: 15px; opacity: 0.9;
    display: flex; align-items: center; gap: 10px;
}

/* ম্যাপ স্টাইলিং */
.map-box {
    display: flex; flex-direction: column;
}
#weatherMap {
    width: 100%;
    height: 100%;
    min-height: 200px;
    border-radius: 15px;
    z-index: 1; /* অন্যান্য এলিমেন্টের উপরে থাকার জন্য */
}

.chart-wrapper { height: 200px; width: 100%; position: relative; }
.forecast-list { display: flex; flex-direction: column; gap: 12px; }
.forecast-item {
    display: flex; justify-content: space-between; align-items: center;
    font-size: 15px; padding-bottom: 8px;
    border-bottom: 1px solid rgba(255,255,255,0.05);
}

/* অ্যালার্ট বক্স */
.alert-box {
    padding: 15px; border-radius: 12px; margin-bottom: 20px;
    display: flex; align-items: center; gap: 12px; font-size: 15px; font-weight: 500;
}
.alert-box.warning { background: rgba(255, 152, 0, 0.15); border: 1px solid rgba(255, 152, 0, 0.4); color: #ffd180; }
.alert-box.error { background: rgba(231, 76, 60, 0.15); border: 1px solid rgba(231, 76, 60, 0.4); color: #ff8a80; }

/* =========================================
   Responsive Breakpoints (Mobile & Tablet)
   ========================================= */

/* Large Tablets & Small Laptops (1024px এর নিচে) */
@media (max-width: 1024px) {
    /* নিচে ম্যাপ এবং গ্রাফকে পাশাপাশি, ফোরকাস্টকে নিচে নামানো হলো */
    .bottom-section {
        grid-template-columns: 1fr 1fr; 
    }
    .forecast-box {
        grid-column: span 2; /* ফোরকাস্ট পুরো জায়গা নেবে */
        display: flex; flex-direction: row; gap: 20px; overflow-x: auto; /* ফোরকাস্ট পাশাপাশি স্ক্রল হবে */
    }
    .forecast-list { flex-direction: row; width: 100%; justify-content: space-around; }
    .forecast-item { border-bottom: none; border-right: 1px solid rgba(255,255,255,0.05); padding-right: 15px; flex-direction: column; gap: 5px;}
    .forecast-item:last-child { border: none; }
}

/* Tablets (768px এর নিচে) */
@media (max-width: 768px) {
    .dashboard-grid { grid-template-columns: 1fr; } /* হিরো এবং ডিটেইলস এক কলামে */
    
    .weather-hero { flex-direction: row; justify-content: space-around; text-align: left; min-height: auto; }
    .hero-main { display: flex; align-items: center; gap: 20px; margin: 0; }
    .temp-group h1 { font-size: 60px; margin: 0; }

    /* বটম সেকশন সব এক কলামে */
    .bottom-section { grid-template-columns: 1fr; } 
    .forecast-box { grid-column: span 1; display: block; overflow-x: visible; }
    .forecast-list { flex-direction: column; }
    .forecast-item { border-right: none; border-bottom: 1px solid rgba(255,255,255,0.05); padding-right: 0; flex-direction: row; }
    
    #weatherMap { min-height: 250px; } /* মোবাইলে ম্যাপ একটু বড় */
}

/* Mobile Devices (600px এর নিচে) */
@media (max-width: 600px) {
    body { padding: 10px; align-items: flex-start; }
    .glass-container { padding: 20px; border-radius: 15px; }
    
    /* হেডার */
    .top-bar { flex-direction: column; gap: 15px; align-items: stretch; }
    .logo { justify-content: center; }
    .search-box { max-width: 100%; }
    .current-time { display: none; }

    /* হিরো */
    .weather-hero { flex-direction: column; text-align: center; gap: 15px; }
    .hero-main { flex-direction: column; gap: 5px; }
    
    /* ডিটেইলস কার্ড */
    .details-grid { grid-template-columns: 1fr 1fr; } 
    .details-grid .aqi-card { grid-column: span 2; }
    
    .card h3 { font-size: 20px; }
    .chart-wrapper { height: 160px; }
}

/* Small Mobile (400px এর নিচে) */
@media (max-width: 400px) {
    .details-grid { grid-template-columns: 1fr; } 
    .details-grid .aqi-card { grid-column: span 1; }
    .temp-group h1 { font-size: 50px; }
    .weather-icon { width: 80px; }
}
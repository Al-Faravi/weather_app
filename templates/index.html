<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Weather Pro | Live Dashboard by Shakawat Hossain Faravi</title>
    
    <meta name="description" content="Advanced Live Weather Dashboard developed by Md. Shakawat Hossain Faravi (Green University). Check real-time weather, AQI, and radar for Dhaka, Feni, and worldwide.">
    
    <meta name="keywords" content="Al Faravi, Shakawat Hossain, MD. Shakawat Hossain Faravi, Shakawa, Hossain, Faravi, Green University of Bangladesh, Joynal Hazari College, Feni, MaliPathor, Parshuram, Fulgazi, Bhuiya Bari, Shaldhar Mohammed Ali High School, Malipathor Gov. Primary School, weather app, live weather, AQI check, আল ফারাভী, সাখাওয়াত হোসেন, গ্রীন ইউনিভার্সিটি, জয়নাল হাজারী কলেজ, ফেনী, মালি পাথর, পরশুরাম, ফুলগাজী, ভূঁইয়া বাড়ি, আবহাওয়া অ্যাপ">
    
    <meta name="robots" content="index, follow">
    <meta name="author" content="Md. Shakawat Hossain Faravi">
    
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://weather-app-five-nu-99.vercel.app/">
    <meta property="og:title" content="Weather Pro by Al Faravi">
    <meta property="og:description" content="Smart Weather App built by Shakawat Hossain Faravi. Features: Live Map, AQI, and Glassmorphism UI.">
    <meta property="og:image" content="https://images.unsplash.com/photo-1592210454132-328629affb12?q=80&w=1000&auto=format&fit=crop">

    <meta name="google-site-verification" content="ia-mEza2Gsyus9-JeJYIR6elLTiFLdrWwm191stU9cc" />
    
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Weather Pro",
      "url": "https://weather-app-five-nu-99.vercel.app/",
      "author": {
        "@type": "Person",
        "name": "Md. Shakawat Hossain Faravi",
        "alternateName": ["Al Faravi", "Shakawat Hossain", "Faravi"],
        "affiliation": {
          "@type": "Organization",
          "name": "Green University of Bangladesh"
        },
        "alumniOf": [
            { "@type": "Organization", "name": "Joynal Hazari College" },
            { "@type": "Organization", "name": "Shaldhar Mohammed Ali High School" }
        ],
        "homeLocation": {
          "@type": "Place",
          "name": "MaliPathor, Parshuram, Feni",
          "address": {
            "@type": "PostalAddress",
            "addressLocality": "Fulgazi",
            "addressRegion": "Feni"
          }
        }
      },
      "description": "A professional weather dashboard with live radar and AQI monitoring."
    }
    </script>

    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="icon" type="image/png" href="https://cdn-icons-png.flaticon.com/512/4052/4052984.png">
</head>
<body class="{{ weather.main_condition if weather else 'default' }}">

    <div class="glass-container">
        
        <header class="top-bar">
            <div class="logo">
                <i class="fas fa-bolt" style="color: var(--accent);"></i> WeatherPro
            </div>
            
            <form method="POST" class="search-box" id="search-form">
                <i class="fas fa-search"></i>
                <input type="text" name="city" id="city-input" placeholder="Search City..." autocomplete="off" required>
                <ul id="suggestions-list" class="suggestions-list"></ul>
            </form>

            <div class="current-time" id="clock">00:00</div>
        </header>

        {% if error %}
        <div class="alert-box error">
            <i class="fas fa-exclamation-circle"></i> {{ error }}
        </div>
        {% endif %}

        {% if alerts %}
            {% for alert in alerts %}
            <div class="alert-box warning">
                <i class="fas fa-bell"></i> {{ alert }}
            </div>
            {% endfor %}
        {% endif %}

        {% if weather %}
        <div class="dashboard-grid">
            
            <div class="weather-hero">
                <div class="location-badge">
                    <i class="fas fa-location-arrow"></i> {{ weather.city }}, {{ weather.country }}
                </div>
                
                <div class="hero-main">
                    <img src="https://openweathermap.org/img/wn/{{ weather.icon }}@4x.png" alt="icon" class="weather-icon">
                    <div class="temp-group">
                        <h1>{{ weather.temp }}°</h1>
                        <p>{{ weather.desc }}</p>
                    </div>
                </div>
                
                <div class="feels-like">
                    Feels like <strong>{{ weather.feels_like }}°</strong>
                </div>
            </div>

            <div class="details-grid">
                {% if aqi %}
                <div class="card aqi-card">
                    <div class="card-head">
                        <i class="fas fa-lungs"></i> Air Quality
                    </div>
                    <div class="aqi-value" style="color: {{ aqi.color }}">
                        <strong>{{ aqi.aqi }}</strong> - {{ aqi.desc }}
                    </div>
                    <div class="progress-bar">
                        <div class="fill" style="width: {{ aqi.aqi * 20 }}%; background: {{ aqi.color }}"></div>
                    </div>
                </div>
                {% endif %}

                <div class="card">
                    <div class="card-head"><i class="fas fa-droplet"></i> Humidity</div>
                    <h3>{{ weather.humidity }}%</h3>
                    <div class="progress-bar">
                        <div class="fill" style="width: {{ weather.humidity }}%"></div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-head"><i class="fas fa-wind"></i> Wind</div>
                    <h3>{{ weather.wind }} <small>km/h</small></h3>
                </div>

                <div class="card">
                    <div class="card-head"><i class="fas fa-eye"></i> Visibility</div>
                    <h3>{{ weather.visibility }} <small>km</small></h3>
                </div>

                <div class="card">
                    <div class="card-head"><i class="fas fa-gauge"></i> Pressure</div>
                    <h3>{{ weather.pressure }} <small>hPa</small></h3>
                </div>
            </div>
        </div>

        <div class="bottom-section">
            <div class="map-box">
                <h4><i class="fas fa-map"></i> Live Cloud & Rain Radar</h4>
                <div id="weatherMap"></div>
            </div>

            <div class="graph-box">
                <h4><i class="fas fa-chart-line"></i> Temperature Trend (24h)</h4>
                <div class="chart-wrapper">
                    <canvas id="hourlyChart"></canvas>
                </div>
            </div>

            <div class="forecast-box">
                <h4>Next 5 Days</h4>
                <div class="forecast-list">
                    {% for day in forecast %}
                    <div class="forecast-item">
                        <span>{{ day.day }}</span>
                        <div style="display: flex; align-items: center; gap: 5px;">
                            <img src="https://openweathermap.org/img/wn/{{ day.icon }}.png" alt="icon">
                            <strong>{{ day.temp }}°</strong>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>

        {% else %}
        <div class="empty-state" style="text-align: center; padding: 50px;">
            <i class="fas fa-cloud-sun fa-4x" style="opacity: 0.5; margin-bottom: 20px;"></i>
            <h2>Type a city name to begin</h2>
        </div>
        {% endif %}

<footer style="margin-top: 50px; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.1); text-align: center; font-size: 13px; opacity: 0.8; line-height: 1.6;">
            <p>Designed and Developed by <strong style="color: var(--accent);">Md. Shakawat Hossain Faravi</strong>.</p>
            
            <p style="font-size: 11px; max-width: 700px; margin: 10px auto;">
                Student of <strong>Green University of Bangladesh</strong> (CSE Dept). 
                Proud resident of <strong>MaliPathor, Parshuram, Feni</strong>.
            </p>
            
            <p style="font-size: 10px; opacity: 0.6; margin-top: 15px;">
                Data Providers: <a href="https://openweathermap.org/" target="_blank" style="color: inherit; text-decoration: underline;">OpenWeatherMap</a> 
                & <a href="https://teleport.org/" target="_blank" style="color: inherit; text-decoration: underline;">Teleport API</a>.
                Map Data: &copy; <a href="https://www.openstreetmap.org/copyright" target="_blank" style="color: inherit;">OpenStreetMap</a> contributors.
            </p>
            
            <p style="font-size: 11px;">&copy; 2026 Weather Pro. All rights reserved.</p>
        </footer>

    </div>

<script>
        // Use 'default' filter to handle null/None values cleanly
        window.hourlyLabels = {{ hourly_labels | tojson | safe if hourly_labels is defined and hourly_labels else '[]' }};
        window.hourlyData = {{ hourly_data | tojson | safe if hourly_data is defined and hourly_data else '[]' }};
        
        // Handle Lat/Lon safely
        window.weatherLat = {{ weather.lat if weather and weather.lat else 'null' }};
        window.weatherLon = {{ weather.lon if weather and weather.lon else 'null' }};
    </script>

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
    
    <script>
        function updateClock() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });
            document.getElementById('clock').innerText = timeString;
        }
        setInterval(updateClock, 1000);
        updateClock();
    </script>
</body>
</html>